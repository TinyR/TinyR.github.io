<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Welcome~">
<meta property="og:type" content="website">
<meta property="og:title" content="RNA">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="RNA">
<meta property="og:description" content="Welcome~">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RNA">
<meta name="twitter:description" content="Welcome~">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> RNA </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">RNA</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/22/Rate-Limiting/" itemprop="url">
                  Rate Limiting
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-07-22T18:15:10+08:00" content="2017-07-22">
              2017-07-22
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;Rate limiting主要用来控制对资源的访问速率，维护服务的稳定性，有许多应用场景，比如：防止爆发式的请求增长冲垮系统，报警系统每秒产生多少个error触发报警。</p>
<h2 id="限流"><a href="#限流" class="headerlink" title="限流"></a>限流</h2><p>&emsp;&emsp;限流模式一般有两种：控制速率和控制并发。</p>
<p>&emsp;&emsp;控制速率指的是限制对于资源的访问速率。本文主要谈的是控制速率。</p>
<p>&emsp;&emsp;控制并发，比如：Semaphore，限制的是访问资源的并发量，即允许多少个请求同时访问该资源。</p>
<h2 id="基本算法"><a href="#基本算法" class="headerlink" title="基本算法"></a>基本算法</h2><h3 id="Leaky-bucket"><a href="#Leaky-bucket" class="headerlink" title="Leaky bucket"></a>Leaky bucket</h3><p>漏桶算法<br><img src="https://github.com/TinyR/images/blob/master/rate-limiter/leaky-bucket.jpg?raw=true" alt="Leaky bucket"></p>
<ul>
<li>一个固定容量的bucket</li>
<li>bucket以一定的速度出水(leak)，系统处理请求</li>
<li>bucket为空，表示没有请求</li>
<li>水（请求）先进入到bucket里，满了（请求过多）则溢出</li>
</ul>
<p>漏桶算法能强行限制数据的传输速率。</p>
<h4 id="leaky-bucket-algorithm-as-a-meter"><a href="#leaky-bucket-algorithm-as-a-meter" class="headerlink" title="leaky bucket algorithm as a meter"></a>leaky bucket algorithm as a meter</h4><blockquote>
<p>“A counter associated with each user transmitting on a connection is incremented whenever the user sends a packet and is decremented periodically. If the counter exceeds a threshold upon being incremented, the network discards the packet. The user specifies the rate at which the counter is decremented (this determines the average bandwidth) and the value of the threshold (a measure of burstiness)”</p>
</blockquote>
<p>bucket是一个计数器(counter)或者变量(variable),counter用来检测是否达到了limit。</p>
<ul>
<li>counter增：请求、事件到达。等同于water进入bucket。当达到limit，不再增。</li>
<li><p>counter减：以固定rate减。等同于water从bucket中leak。<br>&emsp;&emsp;可以被用来检测某个时间发送的速率，比如faults。</p>
<h4 id="leaky-bucket-algorithm-as-a-queue"><a href="#leaky-bucket-algorithm-as-a-queue" class="headerlink" title="leaky bucket algorithm as a queue"></a>leaky bucket algorithm as a queue</h4><p>bucket用queue表示。</p>
</li>
<li><p>进入queue:请求、事件到达入队列。</p>
</li>
<li>离开queue:按照固定速率出队列。</li>
</ul>
<h3 id="Token-bucket"><a href="#Token-bucket" class="headerlink" title="Token bucket"></a>Token bucket</h3><p>&emsp;&emsp;令牌桶算法是网络流量整形（Traffic Shaping）和速率限制（Rate Limiting）中最常使用的一种算法</p>
<p><img src="https://github.com/TinyR/images/blob/master/rate-limiter/token-bucket-lgorithm.jpg?raw=true" alt="Token bucket"></p>
<p>&emsp;&emsp;假设我们限制每秒最多访问r次：</p>
<ul>
<li>系统每1/r秒向bucket中加入一个tocken</li>
<li>bucket最多拥有b个tocken。当bucket满时，新的tocken将被丢弃</li>
<li>每次请求需要向bucket申请一个tocken。bucket移除一个tocken给该请求，系统处理请求。如果bucket的tocken不足，则等待。</li>
</ul>
<h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><p>&emsp;&emsp;如果使用 Java 语言，可以直接使用Guava 的 RateLimiter，有两种实现SmoothRateLimiter 和 SmoothWarmingUp。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="https://en.wikipedia.org/wiki/Rate_limiting" target="_blank" rel="external">Rate limiting</a></p>
<p><a href="https://en.wikipedia.org/wiki/Token_bucket" target="_blank" rel="external">Token bucket</a></p>
<p><a href="https://en.wikipedia.org/wiki/Leaky_bucket" target="_blank" rel="external">Leaky bucket</a></p>
<p><a href="https://github.com/google/guava/blob/master/guava/src/com/google/common/util/concurrent/RateLimiter.java" target="_blank" rel="external">guava RateLimiter</a></p>
<p><a href="https://github.com/google/guava/blob/v18.0/guava/src/com/google/common/util/concurrent/SmoothRateLimiter.java" target="_blank" rel="external">guava SmoothRateLimiter</a></p>
<p><a href="https://gobyexample.com/rate-limiting" target="_blank" rel="external">Go by Example: Rate Limiting</a></p>
<p><a href="https://stackoverflow.com/questions/667508/whats-a-good-rate-limiting-algorithm" target="_blank" rel="external">What’s a good rate limiting algorithm</a></p>
<p><a href="https://blog.jamespan.me/2015/10/19/traffic-shaping-with-token-bucket" target="_blank" rel="external">流量控制与令牌桶算法</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/09/微服务学习/" itemprop="url">
                  微服务学习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-07-09T12:16:52+08:00" content="2017-07-09">
              2017-07-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/微服务/" itemprop="url" rel="index">
                    <span itemprop="name">微服务</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;工作以后，开始接触到微服务。在实际的开发中，也确实感受到了微服务带来的一些便利。</p>
<h2 id="微服务"><a href="#微服务" class="headerlink" title="微服务"></a>微服务</h2><h3 id="单体应用"><a href="#单体应用" class="headerlink" title="单体应用"></a>单体应用</h3><p>&emsp;&emsp;工作前也做过一些项目。虽然开发的时候将这些应用分成好几个模块，但是整个应用整体打包和部署</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ol>
<li>Martin Fowler博客：<a href="https://martinfowler.com/articles/microservices.html" target="_blank" rel="external">Microservices</a></li>
<li>Microservices: From Design to Deployment</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/24/应用程序配置/" itemprop="url">
                  应用程序配置
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-06-24T21:46:01+08:00" content="2017-06-24">
              2017-06-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/后台开发/" itemprop="url" rel="index">
                    <span itemprop="name">后台开发</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;应用程序离不开配置模块,数据库需要配置信息，日志需要配置信息……</p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>&emsp;&emsp;配置信息我们可以将其理解为一系列的key-value，用来调控整个应用程序的行为。比如：在生产环境，连接生产环境数据库；在测试环境连接测试环境数据库。</p>
<h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>&emsp;&emsp;配置信息可以通过硬编码的形式传入，但这种形式不太容易进行管理，不方便修改。于是，可以通过配置文件(比如：yaml,.properties)来集中存储配置信息。通过读取配置文件，读取配置信息。</p>
<h4 id="配置文件的划分"><a href="#配置文件的划分" class="headerlink" title="配置文件的划分"></a>配置文件的划分</h4><p>&emsp;&emsp;应用程序运行在不同的环境中（production, development, test）需要不同的配置文件，有时候也会根据模块的划分，来对配置文件进行划分。一个应用程序往往有多个配置文件。</p>
<h4 id="保护生产环境的配置信息"><a href="#保护生产环境的配置信息" class="headerlink" title="保护生产环境的配置信息"></a>保护生产环境的配置信息</h4><p>&emsp;&emsp;生产环境的一些配置信息，不应该完全暴露给普通开发人员。可以将生产环境配置文件存放在专门的服务器上，只有生产环境的机器才能够访问。应用程序在生产环境运行时，通过HTTP或者其他方式读取配置服务器上的配置信息。</p>
<h4 id="配置修改"><a href="#配置修改" class="headerlink" title="配置修改"></a>配置修改</h4><p>&emsp;&emsp;需要修改配置的时候，就登陆到配置文件所在的机器，进行修改后，reload程序。</p>
<h4 id="存在的问题"><a href="#存在的问题" class="headerlink" title="存在的问题"></a>存在的问题</h4><p>&emsp;&emsp;在分布式系统中，很难因为修改了一点配置信息，就将整个系统reload。</p>
<h3 id="配置中心"><a href="#配置中心" class="headerlink" title="配置中心"></a>配置中心</h3><p>&emsp;&emsp;简单的配置文件能够满足部分应用程序的需求。但存在一些不足，比如有些系统reload成本太大，需要一个配置中心：集中管理依赖的配置、提供web管理平台进行配置和查询、支持应用程序拉取配置信息、支持发布与订阅，当配置变更时主动通知应用程序。</p>
<h4 id="静态配置与动态配置"><a href="#静态配置与动态配置" class="headerlink" title="静态配置与动态配置"></a>静态配置与动态配置</h4><p>下面两张图显示了静态配置与动态配置的区别。</p>
<p>静态配置</p>
<p><img src="https://github.com/TinyR/images/blob/master/web/configuration/Static%20configuration%20process.PNG?raw=true" alt="静态配置"></p>
<p>动态配置</p>
<p><img src="https://github.com/TinyR/images/blob/master/web/configuration/Dynamic%20configuration%20process..PNG?raw=true" alt="动态配置"></p>
<h4 id="开源的解决方案"><a href="#开源的解决方案" class="headerlink" title="开源的解决方案"></a>开源的解决方案</h4><p>&emsp;&emsp;有一些开源的解决方案，比如：阿里的diamond，应用程序不仅可以在启动时从diamond获取相关的配置，而且可以在运行中对配置数据的变化进行感知并获取变化后的配置数据。</p>
<p><strong>想了解更多，可以阅读下面的参考资料。</strong></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://jm.taobao.org/2016/09/28/an-article-about-config-center/" target="_blank" rel="external">一篇好TM长的关于配置中心的文章</a></p>
<p>paper：Dynamic Configuration for Distributed Systems</p>
<p><a href="http://www.infoq.com/cn/articles/5-config-mgmt-best-practices" target="_blank" rel="external">配置管理的五项最佳实践</a></p>
<p><a href="http://jm.taobao.org/2012/04/17/diamond-1-intro/" target="_blank" rel="external">diamond</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/15/go-example学习/" itemprop="url">
                  go example学习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-05-15T23:48:04+08:00" content="2017-05-15">
              2017-05-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/go/" itemprop="url" rel="index">
                    <span itemprop="name">go</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Go-by-Example学习记录"><a href="#Go-by-Example学习记录" class="headerlink" title="Go by Example学习记录"></a>Go by Example学习记录</h1><p>&emsp;&emsp;这篇博客主要记录学习<a href="https://gobyexample.com/" target="_blank" rel="external">Go by Example</a>的一些想法。</p>
<p>###基本语法</p>
<ul>
<li><a href="https://gobyexample.com/hello-world" target="_blank" rel="external">Hello World</a>:经典的Hello World的例子</li>
<li><a href="https://gobyexample.com/values" target="_blank" rel="external">Values</a>:了解go中的一些值</li>
<li><a href="https://gobyexample.com/variables" target="_blank" rel="external">Variables</a>:了解声明变量</li>
<li><a href="https://gobyexample.com/constants" target="_blank" rel="external">Constants</a>:使用const关键词声明常量</li>
<li><a href="https://gobyexample.com/for" target="_blank" rel="external">For</a>:for是go中唯一的loop结构</li>
<li><a href="https://gobyexample.com/if-else" target="_blank" rel="external">If/Else</a>:If/Else语句</li>
<li><a href="https://gobyexample.com/switch" target="_blank" rel="external">Switch</a>:使用switch来表达多个分支的条件语句，可以比较value，也可以比较type</li>
</ul>
<p>###基本数据结构</p>
<ul>
<li><a href="https://gobyexample.com/arrays" target="_blank" rel="external">Arrays</a>:数组，了解定义、初始化</li>
<li><a href="https://gobyexample.com/slices" target="_blank" rel="external">Slices</a>:</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/08/Web后台开发记/" itemprop="url">
                  Web后台开发记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-05-08T23:18:09+08:00" content="2017-05-08">
              2017-05-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/后台/" itemprop="url" rel="index">
                    <span itemprop="name">后台</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>应用程序配置</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/01/基于Docker-Compose开发一个简单的Flask应用/" itemprop="url">
                  基于Docker Compose开发一个简单的Flask应用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-05-01T18:47:23+08:00" content="2017-05-01">
              2017-05-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index">
                    <span itemprop="name">Docker</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;前一篇介绍了如何使一个简单的Flask应用运行在Docker中，一个简单的应用，一个容器运行。一个项目往往还需要Mysql,Redis等等组件，web应用，Mysql，redis运行在各自的容器中。Docker Compose能够帮助定义并且运行有多个container的应用程序。下面将会开发一个简单的Flask应用，使用到了redis，使用Docker Compose运行这个应用。</p>
<h2 id="简单的Flask应用"><a href="#简单的Flask应用" class="headerlink" title="简单的Flask应用"></a>简单的Flask应用</h2><p>app.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</div><div class="line"><span class="keyword">import</span> redis</div><div class="line"></div><div class="line">app = Flask(__name__)</div><div class="line">redis = redis.StrictRedis(host=<span class="string">'redis'</span>, port=<span class="number">6379</span>, db=<span class="number">0</span>)</div><div class="line"><span class="meta">@app.route('/home')</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_flask</span><span class="params">()</span>:</span></div><div class="line">    count = redis.incr(<span class="string">'count'</span>)</div><div class="line">    <span class="keyword">return</span> <span class="string">'Hello Flask! I have been seen &#123;&#125; times.\n'</span>.format(count)</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    app.run(host=<span class="string">'0.0.0.0'</span>)</div></pre></td></tr></table></figure>
<p>注意：host为redis。</p>
<h2 id="requirements-txt文件"><a href="#requirements-txt文件" class="headerlink" title="requirements.txt文件"></a>requirements.txt文件</h2><p>运行命令：</p>
<blockquote>
<p>pip freeze &gt; requirements.txt</p>
</blockquote>
<p>在项目目录下就会生成requirements.txt文件，记录项目依赖。</p>
<h2 id="Dockerfile文件"><a href="#Dockerfile文件" class="headerlink" title="Dockerfile文件"></a>Dockerfile文件</h2><p>在项目目录下新建Dockerfile文件。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#使用python3.5作为base image</span></div><div class="line">FROM python:3.5</div><div class="line"></div><div class="line"><span class="comment">#设置container的工作目录</span></div><div class="line">WORKDIR /app</div><div class="line"></div><div class="line"><span class="comment">#复制falsk应用到/app目录下</span></div><div class="line">ADD . /app</div><div class="line"></div><div class="line"><span class="comment">#下载依赖包</span></div><div class="line">RUN pip3 install -r requirements.txt</div><div class="line"></div><div class="line"><span class="comment">#使得container的5000端口对外暴露</span></div><div class="line">EXPOSE 5000</div><div class="line"></div><div class="line"><span class="comment">#当container启动的时候执行该命令</span></div><div class="line">CMD [<span class="string">"python"</span>, <span class="string">"app.py"</span>]</div></pre></td></tr></table></figure></p>
<h2 id="docker-compose-yml文件"><a href="#docker-compose-yml文件" class="headerlink" title="docker-compose.yml文件"></a>docker-compose.yml文件</h2><p>在项目目录下新建docker-compose.yml文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">version: &apos;2&apos;</div><div class="line">services:</div><div class="line">  web:</div><div class="line">    build: .</div><div class="line">    ports:</div><div class="line">     - &quot;5000:5000&quot;</div><div class="line">    volumes:</div><div class="line">     - .:/app</div><div class="line">  redis:</div><div class="line">    image: &quot;redis:alpine&quot;</div></pre></td></tr></table></figure></p>
<p>docker-compose.yml文件定义了两个services，一个是web,一个是redis。volumes表示将当前目录挂载到container的/app目录下，这样修改当前目录下的代码，再次启动时便会生效。</p>
<h2 id="启动应用"><a href="#启动应用" class="headerlink" title="启动应用"></a>启动应用</h2><p>在项目目录下执行:</p>
<blockquote>
<p>docker-compose up -d</p>
</blockquote>
<p>运行命令：</p>
<blockquote>
<p>docker-compose ps</p>
</blockquote>
<p><img src="https://github.com/TinyR/images/blob/master/Docker/%E5%9F%BA%E4%BA%8EDocker%20Compose%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84Flask%E5%BA%94%E7%94%A8_ps.PNG?raw=true" alt="docker-compose ps"></p>
<h2 id="浏览器访问"><a href="#浏览器访问" class="headerlink" title="浏览器访问"></a>浏览器访问</h2><p>通过浏览器访问可看到:</p>
<p><img src="https://github.com/TinyR/images/blob/master/Docker/%E5%9F%BA%E4%BA%8EDocker%20Compose%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84Flask%E5%BA%94%E7%94%A8_result.PNG?raw=true" alt="浏览器访问flask应用"></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="https://docs.docker.com/compose/gettingstarted/" target="_blank" rel="external">Docker官方:Get started with Docker Compose</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/30/基于Docker开发一个简单的Flask应用/" itemprop="url">
                  基于Docker开发一个简单的Flask应用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-04-30T22:23:19+08:00" content="2017-04-30">
              2017-04-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index">
                    <span itemprop="name">Docker</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;五一宅在了住的地方，写篇博客记录下：怎么让一个Flask应用运行在Docker中。</p>
<h2 id="简单的Flask应用"><a href="#简单的Flask应用" class="headerlink" title="简单的Flask应用"></a>简单的Flask应用</h2><p>app.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</div><div class="line">app = Flask(__name__)</div><div class="line"></div><div class="line"><span class="meta">@app.route('/home')</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="string">'Hello Flask'</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    app.run(host=<span class="string">'0.0.0.0'</span>)</div></pre></td></tr></table></figure>
<h2 id="生成requirements-txt文件"><a href="#生成requirements-txt文件" class="headerlink" title="生成requirements.txt文件"></a>生成requirements.txt文件</h2><p>运行命令：</p>
<blockquote>
<p>pip freeze &gt; requirements.txt</p>
</blockquote>
<p>在项目目录下就会生成requirements.txt文件，记录项目依赖。</p>
<h2 id="Dockerfile文件"><a href="#Dockerfile文件" class="headerlink" title="Dockerfile文件"></a>Dockerfile文件</h2><p>在项目目录下新建Dockerfile文件。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#使用python3.5作为base image</span></div><div class="line">FROM python:3.5</div><div class="line"></div><div class="line"><span class="comment">#设置container的工作目录</span></div><div class="line">WORKDIR /app</div><div class="line"></div><div class="line"><span class="comment">#复制falsk应用到/app目录下</span></div><div class="line">ADD . /app</div><div class="line"></div><div class="line"><span class="comment">#下载依赖包</span></div><div class="line">RUN pip3 install -r requirements.txt</div><div class="line"></div><div class="line"><span class="comment">#使得container的5000端口对外暴露</span></div><div class="line">EXPOSE 5000</div><div class="line"></div><div class="line"><span class="comment">#当container启动的时候执行该命令</span></div><div class="line">CMD [<span class="string">"python"</span>, <span class="string">"app.py"</span>]</div></pre></td></tr></table></figure></p>
<h2 id="生成镜像"><a href="#生成镜像" class="headerlink" title="生成镜像"></a>生成镜像</h2><p>在项目目录下执行命令：</p>
<blockquote>
<p>docker build -t rna/flask .</p>
</blockquote>
<p>rna/flask为镜像的名称。运行该命令后，会依次执行Dockerfile里的指令，最后生成镜像。可通过docker images查看所有镜像。</p>
<h2 id="运行container"><a href="#运行container" class="headerlink" title="运行container"></a>运行container</h2><p>在项目目录下执行命令：</p>
<blockquote>
<p>docker run -d –rm -p 5000:5000 rna/flask</p>
</blockquote>
<p>-p 5000:5000使得本机5000端口映射到container的5000端口。</p>
<p><img src="https://github.com/TinyR/images/blob/master/Docker/%E5%9F%BA%E4%BA%8EDocker%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84Flask%E5%BA%94%E7%94%A8_docker_ps.PNG?raw=true" alt="docker ps"></p>
<h2 id="访问"><a href="#访问" class="headerlink" title="访问"></a>访问</h2><p>通过浏览器访问</p>
<p><img src="https://github.com/TinyR/images/blob/master/Docker/%E5%9F%BA%E4%BA%8EDocker%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84Flask%E5%BA%94%E7%94%A8_%E8%AE%BF%E9%97%AE.PNG?raw=true" alt="浏览器访问flask应用"></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="https://docs.docker.com/get-started/part2/" target="_blank" rel="external">Docker官方:Get Started, Part 2: Containers</a></p>
<p><a href="http://containertutorials.com/docker-compose/flask-simple-app.html" target="_blank" rel="external">Dockerize Simple Flask App</a></p>
<p><a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="external">Dockerfile reference</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/30/为什么使用Docker/" itemprop="url">
                  为什么使用Docker
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-04-30T19:42:55+08:00" content="2017-04-30">
              2017-04-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index">
                    <span itemprop="name">Docker</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;&emsp;目前参与的项目中使用了Docker。在实际工作中也感受到Docker带来的一些便利。</p>
<p>&emsp;&emsp;目前感受到的有以下几点：</p>
<p>&emsp;&emsp;<strong>1.便于开发环境搭建</strong></p>
<p>&emsp;&emsp;一个项目往往会依赖许多组件，比如：Mysql,Redis,Cassandra……一个新人下拉项目后，还需要再在本机上安装Mysql,Redis…如果使用Docker搭建项目，运行命令后将会自动拉取Mysql,Redis镜像，不需要开发人员再去浪费时间去安装Mysql,redis等等组件。</p>
<p>&emsp;&emsp;<strong>2.跨平台</strong></p>
<p>&emsp;&emsp;Docker项目只要机器上安装了Docker都能运行。</p>
<p>测试，部署上带来的便利，等再工作一段时间，感受深点再来补充。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/31/HBase-MemStore-Flush/" itemprop="url">
                  HBase MemStore Flush
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-31T19:15:21+08:00" content="2016-07-31">
              2016-07-31
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="MemStore-Flush"><a href="#MemStore-Flush" class="headerlink" title="MemStore Flush"></a>MemStore Flush</h2><p>HBase基于LSM引擎。更新的数据会首先写入MemStore，当满足一定条件以后，MemStore会刷写到磁盘，生成一个HFile文件。<strong>MemStore的flush单元是Region。即当MemStore flush时，同一Region下的所有MemStore都会被flush。</strong></p>
<h3 id="触发条件"><a href="#触发条件" class="headerlink" title="触发条件"></a>触发条件</h3><ol>
<li>MemStore级别限制：当一个MemStore大小达到上限(hbase.hregion.memstore.flush.size)，该region下的所有MemStore都会被刷写到磁盘。</li>
<li>RegionServer级别：当总的MemStore占用内存超过hbase.regionserver.global.memstore.upperlimit,触发flush,从MemStore占用内存最多的region开始。直到内存占用比低于hbase.regionserver.global.memstore.lowerLimit停止。</li>
<li>当WAL日志的数量达到hbase.regionserver.max.logs，会触发flush,flush的顺序基于MemStore的时间。直到WAL数量降到hbase.regionserver.max.logs一下。</li>
<li>手动触发。shell命令flush ‘tablename’或者flush ‘region name’。</li>
</ol>
<h3 id="flush流程"><a href="#flush流程" class="headerlink" title="flush流程"></a>flush流程</h3><p>分成三个阶段：  </p>
<ol>
<li>prepare阶段：将MemStore内数据集kvset作为快照snapshot，新建一个新的kvset，后续的写入操作都写入kvset中。prepare阶段需要获得region的updateLock的写锁。</li>
<li>flush阶段:将prepare阶段生成的snapshot持久化为临时文件，放到tmp目录下。</li>
<li>commit阶段:将flush阶段生成的文件从tmp目录移到对应的ColumnFamily目录下。</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/30/HBase-MemStore/" itemprop="url">
                  HBase MemStore
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-30T17:30:16+08:00" content="2016-07-30">
              2016-07-30
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="MemStore"><a href="#MemStore" class="headerlink" title="MemStore"></a>MemStore</h2><h2 id="为什么需要MemStore"><a href="#为什么需要MemStore" class="headerlink" title="为什么需要MemStore"></a>为什么需要MemStore</h2><ol>
<li>memstore在内存中，提高HBase写性能。</li>
<li>通过memstore先对keyValue排好序，然后将排好序的keyValue一同刷写。</li>
</ol>
<h2 id="MemStore内部"><a href="#MemStore内部" class="headerlink" title="MemStore内部"></a>MemStore内部</h2><h3 id="KeyValue存放"><a href="#KeyValue存放" class="headerlink" title="KeyValue存放"></a>KeyValue存放</h3><p>　　MemStore内部使用<strong>KeyValueSkipListSet</strong>存放KeyValue。KeyValueSkipListSet本质上是一个类似<strong>SkipListSet</strong>，内部使用<strong>ConcurrentSkipListMap</strong>实现。  </p>
<h3 id="添加KeyValue"><a href="#添加KeyValue" class="headerlink" title="添加KeyValue"></a>添加KeyValue</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">long</span> <span class="title">add</span><span class="params">(<span class="keyword">final</span> KeyValue kv)</span> </span>&#123;</div><div class="line">  KeyValue toAdd = maybeCloneWithAllocator(kv);</div><div class="line">  <span class="keyword">return</span> internalAdd(toAdd);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">long</span> <span class="title">internalAdd</span><span class="params">(<span class="keyword">final</span> KeyValue toAdd)</span> </span>&#123;</div><div class="line">  <span class="keyword">long</span> s = heapSizeChange(toAdd, addToKVSet(toAdd));</div><div class="line">  timeRangeTracker.includeTimestamp(toAdd);</div><div class="line">  <span class="keyword">this</span>.size.addAndGet(s);</div><div class="line">  <span class="keyword">return</span> s;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">addToKVSet</span><span class="params">(KeyValue e)</span> </span>&#123;</div><div class="line">  <span class="keyword">boolean</span> b = <span class="keyword">this</span>.kvset.add(e);</div><div class="line">  setOldestEditTimeToNow();</div><div class="line">  <span class="keyword">return</span> b;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="MemStore-GC优化"><a href="#MemStore-GC优化" class="headerlink" title="MemStore GC优化"></a>MemStore GC优化</h3><h3 id="MemStore-MVCC相关"><a href="#MemStore-MVCC相关" class="headerlink" title="MemStore MVCC相关"></a>MemStore MVCC相关</h3><h3 id="MemStore-flush"><a href="#MemStore-flush" class="headerlink" title="MemStore flush"></a>MemStore flush</h3>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/images/jfm1.jpg"
               alt="RNA" />
          <p class="site-author-name" itemprop="name">RNA</p>
          <p class="site-description motion-element" itemprop="description">Welcome~</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">22</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">RNA</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
